<!doctype html>
<!--[if IE 7]>
<html id="ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">
<!--<![endif]--><html>


  <head>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Player with Playlist</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: url('background.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
            padding: 20px;
            color: #000; /* Set text color to black */
        }
        .song-list {
            list-style-type: none;
            padding: 0;
        }
        .song-list li {
            margin: 5px 0;
            cursor: pointer;
            color: #000; /* Set text color to black */
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>Audio Player</h1>
    <ul class="song-list" id="playlist">
        <!-- Playlist items will be dynamically added here -->
    </ul>
    <audio id="audio-player" controls>
        Your browser does not support the audio element.
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const audioPlayer = document.getElementById('audio-player');
            const playlist = document.getElementById('playlist');

            // Function to add a song to the playlist
            function addToPlaylist(songSrc, songTitle) {
                const listItem = document.createElement('li');
                listItem.textContent = songTitle;
                listItem.setAttribute('data-src', songSrc);
                listItem.addEventListener('click', function() {
                    audioPlayer.src = songSrc;
                    audioPlayer.play();
                });
                playlist.appendChild(listItem);
            }

            // Load playlist from localStorage
            const savedPlaylist = JSON.parse(localStorage.getItem('playlist')) || [];
            savedPlaylist.forEach(song => addToPlaylist(song.src, song.title));

            // Listen for songs added from Tracks page
            window.addEventListener('storage', function(event) {
                if (event.key === 'newSong') {
                    const newSong = JSON.parse(event.newValue);
                    addToPlaylist(newSong.src, newSong.title);

                    // Update playlist in localStorage
                    savedPlaylist.push(newSong);
                    localStorage.setItem('playlist', JSON.stringify(savedPlaylist));
                }
            });
        });
    </script>
</body>
</html>